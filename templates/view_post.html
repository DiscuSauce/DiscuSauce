{% extends "base.html" %}

{% block title %}View Post{% endblock %}

{% block content %}
<div class="post">
    <h3>{{ post[2] }}</h3>
    <div class="post-footer">
        <span class="author">Posted by {{ post[1] }}</span>
        <span class="votes">
            <a href="{{ url_for('vote', post_id=post[0], vote=1) }}"><i class="fas fa-arrow-up"></i></a>
            <span>{{ post[3] - post[4] }}</span>
            <a href="{{ url_for('vote', post_id=post[0], vote=-1) }}"><i class="fas fa-arrow-down"></i></a>
        </span>
    </div>
</div>

<h3>Comments</h3>
<ul class="comment-list">
    {% for comment in comments %}
    <li class="comment">
        <p><strong>{{ comment[1] }}:</strong> {{ comment[2] }}</p>
        {% if 'username' in session and session['username'] == comment[1] %}
        <a href="{{ url_for('delete_comment', comment_id=comment[0]) }}">Delete</a>
        {% endif %}
    </li>
    {% endfor %}
</ul>

<form action="{{ url_for('create_comment', post_id=post[0]) }}" method="post">
    <label for="comment">Add a comment:</label>
    <textarea id="comment" name="comment" rows="4" required></textarea>
    <button type="submit">Submit</button>
</form>
{% endblock %}
