{% extends 'base.html' %}

{% block title %}View Post{% endblock %}

{% block content %}
<article class="post">
    <p>{{ post.content }}</p>
    <div class="post-actions">
        <a href="{{ url_for('vote', post_id=post.id, vote=1) }}" class="btn btn-success">
            <i class="fas fa-thumbs-up"></i> Upvote ({{ post.upvotes }})
        </a>
        <a href="{{ url_for('vote', post_id=post.id, vote=-1) }}" class="btn btn-danger">
            <i class="fas fa-thumbs-down"></i> Downvote ({{ post.downvotes }})
        </a>
    </div>
</article>
<section class="comments">
    <h2>Comments</h2>
    <form action="{{ url_for('view_post', post_id=post.id) }}" method="post">
        <textarea name="comment" rows="4" placeholder="Add a comment"></textarea>
        <button type="submit" class="btn btn-primary"><i class="fas fa-comment-dots"></i> Comment</button>
    </form>
    {% for comment in comments %}
    <div class="comment">
        <p>{{ comment.content }}</p>
        <div class="comment-actions">
            {% if comment.user_id == session['user_id'] %}
            <a href="{{ url_for('delete_comment', comment_id=comment.id) }}" class="btn btn-danger">
                <i class="fas fa-trash-alt"></i> Delete
            </a>
            {% endif %}
        </div>
    </div>
    {% endfor %}
</section>
{% endblock %}
